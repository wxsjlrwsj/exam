import{a as t}from"./index-ngrFHoWO.js";import{a2 as o,ac as a}from"./index-DOcvSAvK.js";const s=t.create({baseURL:"/api",timeout:5e3});s.interceptors.request.use(e=>{const r=localStorage.getItem("token");return r&&(e.headers.Authorization="Bearer "+r),e},e=>(console.log(e),Promise.reject(e)));s.interceptors.response.use(e=>{const r=e.data;return e.config.responseType==="blob"?r:r.code&&r.code!==200?(o({message:r.message||"Error",type:"error",duration:5*1e3}),r.code===401&&(localStorage.removeItem("token"),a.push("/login")),Promise.reject(new Error(r.message||"Error"))):r},e=>(console.log("err"+e),o({message:e.message,type:"error",duration:5*1e3}),Promise.reject(e)));export{s};
