import{_ as P}from"./logo-y3WsqpWF.js";import{r as _,a as T,c as k,b as r,d as t,w as l,e as n,u as R,i as U,o as z,f as w,m as q,j as p}from"./index-DOcvSAvK.js";import{P as B}from"./ParticlesBackground-DjYnQhPs.js";import{s as C}from"./request-3uTHAmsp.js";import{_ as h}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-ngrFHoWO.js";const E={class:"register-container"},F={class:"register-box"},L={class:"extra-actions"},N={class:"has-account"},j={__name:"Register",setup(M){const g=R(),v=U("showMessage"),u=_(!1),d=_(null),s=T({username:"",password:"",confirmPassword:"",email:"",userType:""}),y={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于 6 位",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(m,e,a)=>{e===""?a(new Error("请再次输入密码")):e!==s.password?a(new Error("两次输入密码不一致!")):a()},trigger:"blur"}],userType:[{required:!0,message:"请选择用户类型",trigger:"change"}]},V=async()=>{d.value&&await d.value.validate(async m=>{if(m){u.value=!0;try{await C.post("/auth/register",{username:s.username,password:s.password,userType:s.userType,email:s.email}),v("注册成功，请登录","success"),g.push("/login")}catch{}finally{u.value=!1}}})};return(m,e)=>{const a=n("el-input"),i=n("el-form-item"),f=n("el-option"),b=n("el-select"),c=n("el-button"),x=n("el-form");return z(),k("div",E,[r(B,{color:"rgba(255, 255, 255, 0.6)",count:100}),t("div",F,[e[9]||(e[9]=t("div",{class:"register-header"},[t("img",{src:P,alt:"Logo",class:"logo"}),t("h1",{class:"title"},"注册新账号"),t("p",{class:"subtitle"},"加入超星考试系统")],-1)),r(x,{ref_key:"registerFormRef",ref:d,model:s,rules:y,class:"register-form"},{default:l(()=>[r(i,{prop:"username"},{default:l(()=>[r(a,{modelValue:s.username,"onUpdate:modelValue":e[0]||(e[0]=o=>s.username=o),placeholder:"用户名","prefix-icon":"User",size:"large"},null,8,["modelValue"])]),_:1}),r(i,{prop:"password"},{default:l(()=>[r(a,{modelValue:s.password,"onUpdate:modelValue":e[1]||(e[1]=o=>s.password=o),type:"password",placeholder:"密码","prefix-icon":"Lock",size:"large"},null,8,["modelValue"])]),_:1}),r(i,{prop:"confirmPassword"},{default:l(()=>[r(a,{modelValue:s.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=o=>s.confirmPassword=o),type:"password",placeholder:"确认密码","prefix-icon":"Lock",size:"large"},null,8,["modelValue"])]),_:1}),r(i,{prop:"email"},{default:l(()=>[r(a,{modelValue:s.email,"onUpdate:modelValue":e[3]||(e[3]=o=>s.email=o),placeholder:"邮箱 (选填)","prefix-icon":w(q),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),r(i,{prop:"userType",label:"用户类型"},{default:l(()=>[r(b,{modelValue:s.userType,"onUpdate:modelValue":e[4]||(e[4]=o=>s.userType=o),placeholder:"请选择用户类型",size:"large"},{default:l(()=>[r(f,{label:"学生",value:"student"}),r(f,{label:"教师",value:"teacher"})]),_:1},8,["modelValue"])]),_:1}),r(i,null,{default:l(()=>[r(c,{type:"primary",loading:u.value,onClick:V,class:"register-button"},{default:l(()=>[...e[6]||(e[6]=[p("立即注册",-1)])]),_:1},8,["loading"])]),_:1}),t("div",L,[t("span",N,[e[8]||(e[8]=p("已有账号？ ",-1)),r(c,{link:"",type:"primary",onClick:e[5]||(e[5]=o=>w(g).push("/login"))},{default:l(()=>[...e[7]||(e[7]=[p("立即登录",-1)])]),_:1})])])]),_:1},8,["model"])])])}}},K=h(j,[["__scopeId","data-v-4b691f0d"]]);export{K as default};
