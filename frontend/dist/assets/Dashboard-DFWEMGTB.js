import{r as v,k as I,v as Q,q as W,u as X,c as w,b as s,w as l,e as _,o as a,d as r,p as d,f as n,x as Y,F as M,n as u,y as f,z as Z,A as p,B as $,l as ee,C as se,D as le,E as A,G as te,g as ae,H as oe,I as de,J as ne,K as ue,L as ie,j as k,t as z,M as re,T as me,N as _e}from"./index-DOcvSAvK.js";import{_ as ce}from"./logo-y3WsqpWF.js";import{s as fe}from"./request-3uTHAmsp.js";import{_ as pe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-ngrFHoWO.js";const be={class:"dashboard-container"},ke={class:"header-left"},ye={class:"header-right"},ge={class:"user-info"},ve={class:"username"},xe={__name:"Dashboard",setup(Ce){const x=X(),D=Q(),T=v(!1),B=v(localStorage.getItem("username")||"用户"),y=v(localStorage.getItem("userType")||"student"),E=v(""),g=v((localStorage.getItem("disabledModules")||"").split(",")),L=I(()=>D.path),N=I(()=>D),R=I(()=>"/dashboard/home"),t=b=>g.value.includes(b),c=(b,e)=>{t(e)&&b.preventDefault()},j=()=>{T.value=!T.value},F=b=>{b==="logout"?(localStorage.removeItem("token"),localStorage.removeItem("userType"),localStorage.removeItem("username"),x.push("/login")):b==="profile"?x.push({name:"UserProfile"}):b==="settings"&&x.push({name:"AccountSettings"})};return W(()=>{localStorage.getItem("token")||x.push("/login"),window.addEventListener("storage",()=>{g.value=(localStorage.getItem("disabledModules")||"").split(",")}),(async()=>{try{if(y.value!=="admin"){g.value=[],localStorage.setItem("disabledModules","");return}const C=((await fe.get("/system/modules",{params:{status:"disabled",page:1,size:100}})).data?.list||[]).map(h=>h.code);g.value=C,localStorage.setItem("disabledModules",C.join(","))}catch{y.value!=="admin"&&(g.value=[],localStorage.setItem("disabledModules",""))}})()}),(b,e)=>{const o=_("el-icon"),m=_("el-menu-item"),C=_("el-menu"),h=_("el-aside"),V=_("el-breadcrumb-item"),P=_("el-breadcrumb"),U=_("el-avatar"),S=_("el-dropdown-item"),G=_("el-dropdown-menu"),H=_("el-dropdown"),J=_("el-header"),K=_("router-view"),O=_("el-main"),q=_("el-container");return a(),w("div",be,[s(q,{class:"dashboard-layout"},{default:l(()=>[s(h,{width:"220px",class:"sidebar"},{default:l(()=>[e[27]||(e[27]=r("div",{class:"logo-container"},[r("img",{src:ce,alt:"Logo",class:"logo"}),r("h2",{class:"logo-text"},"超星考试系统")],-1)),s(C,{"default-active":L.value,class:"sidebar-menu",router:!0,"background-color":"#001529","text-color":"#fff","active-text-color":"#1890ff"},{default:l(()=>[s(m,{index:"/dashboard/home"},{default:l(()=>[s(o,null,{default:l(()=>[s(n(Y))]),_:1}),e[13]||(e[13]=r("span",null,"首页",-1))]),_:1}),y.value==="admin"?(a(),w(M,{key:0},[t("sys_module")?d("",!0):(a(),u(m,{key:0,index:"/dashboard/admin/function-module",class:f({"is-disabled-module":t("sys_module")}),onClick:e[0]||(e[0]=i=>c(i,"sys_module"))},{default:l(()=>[s(o,null,{default:l(()=>[s(n(Z))]),_:1}),e[14]||(e[14]=r("span",null,"功能模块管理",-1)),t("sys_module")?(a(),u(o,{key:0,class:"disabled-icon"},{default:l(()=>[s(n(p))]),_:1})):d("",!0)]),_:1},8,["class"])),t("sys_org")?d("",!0):(a(),u(m,{key:1,index:"/dashboard/admin/org-management",class:f({"is-disabled-module":t("sys_org")}),onClick:e[1]||(e[1]=i=>c(i,"sys_org"))},{default:l(()=>[s(o,null,{default:l(()=>[s(n($))]),_:1}),e[15]||(e[15]=r("span",null,"组织机构管理",-1)),t("sys_org")?(a(),u(o,{key:0,class:"disabled-icon"},{default:l(()=>[s(n(p))]),_:1})):d("",!0)]),_:1},8,["class"])),t("sys_perm")?d("",!0):(a(),u(m,{key:2,index:"/dashboard/admin/permission",class:f({"is-disabled-module":t("sys_perm")}),onClick:e[2]||(e[2]=i=>c(i,"sys_perm"))},{default:l(()=>[s(o,null,{default:l(()=>[s(n(ee))]),_:1}),e[16]||(e[16]=r("span",null,"权限管理",-1)),t("sys_perm")?(a(),u(o,{key:0,class:"disabled-icon"},{default:l(()=>[s(n(p))]),_:1})):d("",!0)]),_:1},8,["class"])),t("sys_log")?d("",!0):(a(),u(m,{key:3,index:"/dashboard/admin/audit-log",class:f({"is-disabled-module":t("sys_log")}),onClick:e[3]||(e[3]=i=>c(i,"sys_log"))},{default:l(()=>[s(o,null,{default:l(()=>[s(n(se))]),_:1}),e[17]||(e[17]=r("span",null,"操作日志",-1)),t("sys_log")?(a(),u(o,{key:0,class:"disabled-icon"},{default:l(()=>[s(n(p))]),_:1})):d("",!0)]),_:1},8,["class"]))],64)):d("",!0),y.value==="student"?(a(),w(M,{key:1},[t("stu_exam")?d("",!0):(a(),u(m,{key:0,index:"/dashboard/student/exam-list",class:f({"is-disabled-module":t("stu_exam")}),onClick:e[4]||(e[4]=i=>c(i,"stu_exam"))},{default:l(()=>[s(o,null,{default:l(()=>[s(n(le))]),_:1}),e[18]||(e[18]=r("span",null,"查看考试",-1)),t("stu_exam")?(a(),u(o,{key:0,class:"disabled-icon"},{default:l(()=>[s(n(p))]),_:1})):d("",!0)]),_:1},8,["class"])),t("stu_practice")?d("",!0):(a(),u(m,{key:1,index:"/dashboard/student/practice",class:f({"is-disabled-module":t("stu_practice")}),onClick:e[5]||(e[5]=i=>c(i,"stu_practice"))},{default:l(()=>[s(o,null,{default:l(()=>[s(n(A))]),_:1}),e[19]||(e[19]=r("span",null,"练题题库",-1)),t("stu_practice")?(a(),u(o,{key:0,class:"disabled-icon"},{default:l(()=>[s(n(p))]),_:1})):d("",!0)]),_:1},8,["class"])),t("stu_personalized")?d("",!0):(a(),u(m,{key:2,index:"/dashboard/student/personalized",class:f({"is-disabled-module":t("stu_personalized")}),onClick:e[6]||(e[6]=i=>c(i,"stu_personalized"))},{default:l(()=>[s(o,null,{default:l(()=>[s(n(te))]),_:1}),e[20]||(e[20]=r("span",null,"个性化题库",-1)),t("stu_personalized")?(a(),u(o,{key:0,class:"disabled-icon"},{default:l(()=>[s(n(p))]),_:1})):d("",!0)]),_:1},8,["class"])),t("stu_profile")?d("",!0):(a(),u(m,{key:3,index:"/dashboard/student/profile",class:f({"is-disabled-module":t("stu_profile")}),onClick:e[7]||(e[7]=i=>c(i,"stu_profile"))},{default:l(()=>[s(o,null,{default:l(()=>[s(n(ae))]),_:1}),e[21]||(e[21]=r("span",null,"个人空间",-1)),t("stu_profile")?(a(),u(o,{key:0,class:"disabled-icon"},{default:l(()=>[s(n(p))]),_:1})):d("",!0)]),_:1},8,["class"]))],64)):d("",!0),y.value==="teacher"?(a(),w(M,{key:2},[t("tch_practice")?d("",!0):(a(),u(m,{key:0,index:"/dashboard/teacher/practice",class:f({"is-disabled-module":t("tch_practice")}),onClick:e[8]||(e[8]=i=>c(i,"tch_practice"))},{default:l(()=>[s(o,null,{default:l(()=>[s(n(A))]),_:1}),e[22]||(e[22]=r("span",null,"练题题库",-1)),t("tch_practice")?(a(),u(o,{key:0,class:"disabled-icon"},{default:l(()=>[s(n(p))]),_:1})):d("",!0)]),_:1},8,["class"])),t("tch_bank")?d("",!0):(a(),u(m,{key:1,index:"/dashboard/teacher/question-bank",class:f({"is-disabled-module":t("tch_bank")}),onClick:e[9]||(e[9]=i=>c(i,"tch_bank"))},{default:l(()=>[s(o,null,{default:l(()=>[s(n(oe))]),_:1}),e[23]||(e[23]=r("span",null,"考题题库",-1)),t("tch_bank")?(a(),u(o,{key:0,class:"disabled-icon"},{default:l(()=>[s(n(p))]),_:1})):d("",!0)]),_:1},8,["class"])),t("tch_exam")?d("",!0):(a(),u(m,{key:2,index:"/dashboard/teacher/exam-management",class:f({"is-disabled-module":t("tch_exam")}),onClick:e[10]||(e[10]=i=>c(i,"tch_exam"))},{default:l(()=>[s(o,null,{default:l(()=>[s(n(de))]),_:1}),e[24]||(e[24]=r("span",null,"考试管理",-1)),t("tch_exam")?(a(),u(o,{key:0,class:"disabled-icon"},{default:l(()=>[s(n(p))]),_:1})):d("",!0)]),_:1},8,["class"])),t("tch_score")?d("",!0):(a(),u(m,{key:3,index:"/dashboard/teacher/score-management",class:f({"is-disabled-module":t("tch_score")}),onClick:e[11]||(e[11]=i=>c(i,"tch_score"))},{default:l(()=>[s(o,null,{default:l(()=>[s(n(ne))]),_:1}),e[25]||(e[25]=r("span",null,"成绩管理",-1)),t("tch_score")?(a(),u(o,{key:0,class:"disabled-icon"},{default:l(()=>[s(n(p))]),_:1})):d("",!0)]),_:1},8,["class"])),t("tch_audit")?d("",!0):(a(),u(m,{key:4,index:"/dashboard/teacher/question-audit",class:f({"is-disabled-module":t("tch_audit")}),onClick:e[12]||(e[12]=i=>c(i,"tch_audit"))},{default:l(()=>[s(o,null,{default:l(()=>[s(n(ue))]),_:1}),e[26]||(e[26]=r("span",null,"题目审核",-1)),t("tch_audit")?(a(),u(o,{key:0,class:"disabled-icon"},{default:l(()=>[s(n(p))]),_:1})):d("",!0)]),_:1},8,["class"]))],64)):d("",!0)]),_:1},8,["default-active"])]),_:1}),s(q,{class:"main-container"},{default:l(()=>[s(J,{class:"header"},{default:l(()=>[r("div",ke,[s(o,{class:"toggle-sidebar",onClick:j},{default:l(()=>[s(n(ie))]),_:1}),s(P,{separator:"/"},{default:l(()=>[s(V,{to:{path:R.value}},{default:l(()=>[...e[28]||(e[28]=[k("首页",-1)])]),_:1},8,["to"]),N.value.path!=="/dashboard/home"?(a(),u(V,{key:0},{default:l(()=>[k(z(N.value.meta.title||"未知页面"),1)]),_:1})):d("",!0)]),_:1})]),r("div",ye,[s(H,{trigger:"click",onCommand:F},{dropdown:l(()=>[s(G,null,{default:l(()=>[s(S,{command:"profile"},{default:l(()=>[...e[29]||(e[29]=[k("个人信息",-1)])]),_:1}),s(S,{command:"settings"},{default:l(()=>[...e[30]||(e[30]=[k("账号设置",-1)])]),_:1}),s(S,{divided:"",command:"logout"},{default:l(()=>[...e[31]||(e[31]=[k("退出登录",-1)])]),_:1})]),_:1})]),default:l(()=>[r("div",ge,[s(U,{size:32,src:E.value},{default:l(()=>[k(z(B.value.charAt(0)),1)]),_:1},8,["src"]),r("span",ve,z(B.value),1),s(o,null,{default:l(()=>[s(n(re))]),_:1})])]),_:1})])]),_:1}),s(O,{class:"main-content"},{default:l(()=>[s(K,null,{default:l(({Component:i})=>[s(me,{name:"fade",mode:"out-in"},{default:l(()=>[(a(),u(_e(i)))]),_:2},1024)]),_:1})]),_:1})]),_:1})]),_:1})])}}},ze=pe(xe,[["__scopeId","data-v-f8e75fd2"]]);export{ze as default};
