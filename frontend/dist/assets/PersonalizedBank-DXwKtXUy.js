import{i as j}from"./http-CJ7Q9mKW.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as d,a as $,q as Q,c as C,d as y,b as e,$ as G,w as t,e as o,X as H,n as O,i as X,o as w,F as J,P as K,j as p,t as V}from"./index-DOcvSAvK.js";import"./index-ngrFHoWO.js";const W={class:"personalized-bank-container"},Y={class:"pagination-container"},Z={__name:"PersonalizedBank",setup(ee){const z=X("showMessage"),m=d(!1),u=d(1),_=d(10),f=d(0),v=d([]),L=[{label:"单选题",value:"SINGLE"},{label:"多选题",value:"MULTI"},{label:"判断题",value:"TRUE_FALSE"},{label:"填空题",value:"FILL"},{label:"简答题",value:"SHORT"}],r=$({type:"",source:""}),S={1:"单选题",2:"多选题",3:"判断题",4:"填空题",5:"简答题"},I=n=>S[n]||"未知",U=n=>({wrong:"danger",weak:"warning",daily:"success"})[n]||"info",c=async()=>{m.value=!0;try{const l=(await j.get("/api/questions",{params:{page:u.value,size:_.value,typeCode:r.type||void 0}}))?.data||{},s=Array.isArray(l.list)?l.list:[];v.value=s,f.value=Number(l.total)||s.length}catch{v.value=[],f.value=0}finally{m.value=!1}},x=()=>{u.value=1,c()},T=()=>{c()},B=()=>{u.value=1,c()},F=n=>{z(`开始练习: ${n.content.substring(0,10)}...`,"success")};return Q(()=>{c()}),(n,l)=>{const s=o("el-option"),k=o("el-select"),g=o("el-form-item"),b=o("el-button"),P=o("el-form"),M=o("el-card"),i=o("el-table-column"),N=o("el-rate"),R=o("el-tag"),q=o("el-table"),D=o("el-pagination"),E=H("loading");return w(),C("div",W,[l[7]||(l[7]=y("div",{class:"page-header"},[y("h2",{class:"page-title"},"个性化题库")],-1)),e(M,{class:"filter-card"},{default:t(()=>[e(P,{inline:!0,model:r,class:"filter-form"},{default:t(()=>[e(g,{label:"题目类型"},{default:t(()=>[e(k,{modelValue:r.type,"onUpdate:modelValue":l[0]||(l[0]=a=>r.type=a),placeholder:"请选择题型",clearable:""},{default:t(()=>[(w(),C(J,null,K(L,a=>e(s,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(g,{label:"推荐来源"},{default:t(()=>[e(k,{modelValue:r.source,"onUpdate:modelValue":l[1]||(l[1]=a=>r.source=a),placeholder:"请选择来源",clearable:""},{default:t(()=>[e(s,{label:"错题推荐",value:"wrong"}),e(s,{label:"薄弱知识点",value:"weak"}),e(s,{label:"每日一练",value:"daily"})]),_:1},8,["modelValue"])]),_:1}),e(g,null,{default:t(()=>[e(b,{type:"primary",onClick:x},{default:t(()=>[...l[4]||(l[4]=[p("查询",-1)])]),_:1}),e(b,{onClick:n.resetFilter},{default:t(()=>[...l[5]||(l[5]=[p("重置",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),G((w(),O(q,{data:v.value,border:"",style:{width:"100%"}},{default:t(()=>[e(i,{prop:"id",label:"ID",width:"80"}),e(i,{prop:"typeId",label:"题型",width:"120"},{default:t(a=>[p(V(I(a.row.typeId)),1)]),_:1}),e(i,{prop:"content",label:"题目内容","show-overflow-tooltip":""}),e(i,{prop:"difficulty",label:"难度",width:"150"},{default:t(a=>[e(N,{modelValue:a.row.difficulty,"onUpdate:modelValue":h=>a.row.difficulty=h,disabled:"","text-color":"#ff9900"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(i,{prop:"recommendReason",label:"推荐理由",width:"150"},{default:t(a=>[e(R,{type:U(a.row.source)},{default:t(()=>[p(V(a.row.recommendReason),1)]),_:2},1032,["type"])]),_:1}),e(i,{label:"操作",width:"120",fixed:"right"},{default:t(a=>[e(b,{link:"",type:"primary",onClick:h=>F(a.row)},{default:t(()=>[...l[6]||(l[6]=[p("开始练习",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[E,m.value]]),y("div",Y,[e(D,{"current-page":u.value,"onUpdate:currentPage":l[2]||(l[2]=a=>u.value=a),"page-size":_.value,"onUpdate:pageSize":l[3]||(l[3]=a=>_.value=a),"page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper",total:f.value,onSizeChange:B,onCurrentChange:T},null,8,["current-page","page-size","total"])])])}}},ne=A(Z,[["__scopeId","data-v-708a3954"]]);export{ne as default};
