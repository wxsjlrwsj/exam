# äººè„¸è¯†åˆ«åŠŸèƒ½ - å¿«é€Ÿå¼€å§‹æŒ‡å—

## ğŸ¯ åŠŸèƒ½è¯´æ˜

æœ¬é¡¹ç›®å·²å®Œæ•´é›†æˆç™¾åº¦AIäººè„¸è¯†åˆ«åŠŸèƒ½ï¼Œç”¨äºè€ƒè¯•å‰çš„èº«ä»½éªŒè¯ã€‚**æ‰€æœ‰APIé…ç½®å·²å†…ç½®ï¼Œå…‹éš†é¡¹ç›®åå³å¯ç›´æ¥ä½¿ç”¨ï¼Œæ— éœ€ä»»ä½•é¢å¤–é…ç½®ã€‚**

## âœ… å·²å†…ç½®çš„é…ç½®

### ç™¾åº¦äººè„¸è¯†åˆ«APIå‡­è¯ï¼ˆå·²é…ç½®ï¼‰

```yaml
# backend/src/main/resources/application.yml
baidu:
  face:
    app-id: 121249541
    api-key: iFloNzCZGwX1QSAPkCQcm0eg
    secret-key: jGwzBT9G2QQKGV5kecsxy5MBzkbShIk4
    threshold: 80.0
```

**âœ¨ è¿™äº›é…ç½®å·²å†™å…¥ä»£ç ï¼Œå›¢é˜Ÿæˆå‘˜å…‹éš†é¡¹ç›®åå¯ç›´æ¥ä½¿ç”¨ï¼**

## ğŸš€ å¿«é€Ÿå¼€å§‹ï¼ˆ3æ­¥å¯åŠ¨ï¼‰

### æ­¥éª¤1ï¼šå¯åŠ¨æ•°æ®åº“

```bash
docker-compose up -d mysql
```

### æ­¥éª¤2ï¼šå¯åŠ¨åç«¯

```bash
cd backend
mvn spring-boot:run
```

æˆ–ä½¿ç”¨Dockerç¼–è¯‘ï¼š
```bash
docker run --rm -v "${PWD}/backend:/app" -w /app maven:3.9.8-eclipse-temurin-17 mvn package -DskipTests
java -jar backend/target/backend.jar
```

### æ­¥éª¤3ï¼šå¯åŠ¨å‰ç«¯

```bash
cd frontend
npm install
npm run dev
```

è®¿é—®ï¼šhttp://localhost:5173

## ğŸ“± ä½¿ç”¨äººè„¸è¯†åˆ«åŠŸèƒ½

### 1ï¸âƒ£ ä¸Šä¼ äººè„¸ç…§ç‰‡

1. ç™»å½•ç³»ç»Ÿ
   - ç”¨æˆ·åï¼š`student1`
   - å¯†ç ï¼š`123456`

2. è¿›å…¥"ä¸ªäººç©ºé—´"é¡µé¢
3. ç‚¹å‡»"äººè„¸è¯†åˆ«"æ ‡ç­¾
4. ç‚¹å‡»"ä¸Šä¼ äººè„¸ç…§ç‰‡"
5. é€‰æ‹©æ¸…æ™°çš„æ­£é¢ç…§ç‰‡ï¼ˆJPG/PNGï¼Œ<5MBï¼‰
6. ä¸Šä¼ æˆåŠŸåä¼šæ˜¾ç¤ºç…§ç‰‡é¢„è§ˆ

### 2ï¸âƒ£ å‚åŠ è€ƒè¯•å¹¶éªŒè¯

1. è¿›å…¥"æŸ¥çœ‹è€ƒè¯•"é¡µé¢
2. ç‚¹å‡»ä»»æ„è€ƒè¯•çš„"å‚åŠ è€ƒè¯•"æŒ‰é’®
3. **ç³»ç»Ÿè‡ªåŠ¨å¼¹å‡ºäººè„¸éªŒè¯å¯¹è¯æ¡†**
4. ç‚¹å‡»"å¼€å¯æ‘„åƒå¤´"
5. å¯¹å‡†æ‘„åƒå¤´ï¼Œç‚¹å‡»"æ‹ç…§éªŒè¯"
6. ç³»ç»Ÿæ˜¾ç¤ºéªŒè¯ç»“æœï¼š
   - âœ… éªŒè¯é€šè¿‡ï¼šç›¸ä¼¼åº¦ â‰¥ 80%
   - âŒ éªŒè¯å¤±è´¥ï¼šç›¸ä¼¼åº¦ < 80%
7. éªŒè¯é€šè¿‡åï¼Œç‚¹å‡»"ç¡®è®¤è¿›å…¥è€ƒè¯•"
8. æˆåŠŸè¿›å…¥è€ƒè¯•ç•Œé¢

## ğŸ”§ æ ¸å¿ƒæ–‡ä»¶è¯´æ˜

### åç«¯æ–‡ä»¶

```
backend/
â”œâ”€â”€ src/main/resources/
â”‚   â””â”€â”€ application.yml                    # âœ… APIé…ç½®ï¼ˆå·²å®Œæˆï¼‰
â”œâ”€â”€ src/main/java/.../face/
â”‚   â”œâ”€â”€ FaceController.java                # APIæ¥å£
â”‚   â”œâ”€â”€ FaceRecognitionService.java        # æ ¸å¿ƒæœåŠ¡ï¼ˆV2/V3 APIï¼‰
â”‚   â””â”€â”€ FacePhotoRepository.java           # æ•°æ®è®¿é—®
```

### å‰ç«¯æ–‡ä»¶

```
frontend/
â”œâ”€â”€ src/components/
â”‚   â”œâ”€â”€ FacePhotoUpload.vue                # ç…§ç‰‡ä¸Šä¼ ç»„ä»¶
â”‚   â””â”€â”€ FaceVerification.vue               # äººè„¸éªŒè¯ç»„ä»¶
â”œâ”€â”€ src/views/student/
â”‚   â”œâ”€â”€ ExamList.vue                       # è€ƒè¯•åˆ—è¡¨ï¼ˆé›†æˆéªŒè¯ï¼‰
â”‚   â””â”€â”€ ProfilePage.vue                    # ä¸ªäººä¿¡æ¯é¡µé¢
```

## ğŸ”‘ APIç«¯ç‚¹

| ç«¯ç‚¹ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/api/face/upload-photo` | POST | ä¸Šä¼ äººè„¸ç…§ç‰‡ |
| `/api/face/has-photo` | GET | æ£€æŸ¥æ˜¯å¦å·²ä¸Šä¼  |
| `/api/face/verify` | POST | äººè„¸éªŒè¯ |

## ğŸ“Š æŠ€æœ¯æ¶æ„

### åç«¯æŠ€æœ¯æ ˆ
- Spring Boot 3.3.4
- MyBatis
- ç™¾åº¦AI SDK 4.16.18
- MySQL 8.0

### å‰ç«¯æŠ€æœ¯æ ˆ
- Vue 3 (Composition API)
- Element Plus
- Vite
- Axios

### äººè„¸è¯†åˆ«æµç¨‹

```
ç”¨æˆ·ç‚¹å‡»"å‚åŠ è€ƒè¯•"
    â†“
æ£€æŸ¥æ˜¯å¦å·²ä¸Šä¼ äººè„¸ç…§ç‰‡
    â†“
å¼¹å‡ºäººè„¸éªŒè¯å¯¹è¯æ¡†
    â†“
å¼€å¯æ‘„åƒå¤´ â†’ æ‹ç…§
    â†“
Base64ç¼–ç  â†’ å‘é€åˆ°åç«¯
    â†“
åç«¯è°ƒç”¨ç™¾åº¦API
    â”œâ”€ V2 APIï¼ˆä¼˜å…ˆï¼‰
    â””â”€ V3 APIï¼ˆV2å¤±è´¥æ—¶ï¼‰
    â†“
è¿”å›ç›¸ä¼¼åº¦åˆ†æ•°
    â†“
å‰ç«¯åˆ¤æ–­æ˜¯å¦é€šè¿‡ï¼ˆâ‰¥80%ï¼‰
    â†“
é€šè¿‡ â†’ è¿›å…¥è€ƒè¯•
å¤±è´¥ â†’ æç¤ºé‡æ–°éªŒè¯
```

## ğŸ§ª æµ‹è¯•è´¦å·

ç³»ç»Ÿå·²é¢„ç½®æµ‹è¯•è´¦å·ï¼ˆå·²ä¸Šä¼ äººè„¸ç…§ç‰‡ï¼‰ï¼š

```
ç”¨æˆ·å: student1
å¯†ç : 123456
```

## ğŸ“ æ•°æ®åº“é…ç½®

### é»˜è®¤é…ç½®ï¼ˆå·²åœ¨application.ymlä¸­ï¼‰

```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/chaoxing
    username: root
    password: root  # é€šè¿‡ç¯å¢ƒå˜é‡ DB_PASSWORD è®¾ç½®
```

### å¯åŠ¨æ—¶è®¾ç½®å¯†ç 

```bash
# Linux/Mac
export DB_PASSWORD=root
java -jar backend.jar

# Windows PowerShell
$env:DB_PASSWORD="root"
java -jar backend.jar
```

## âš™ï¸ å¯é€‰é…ç½®

### ä¿®æ”¹ç›¸ä¼¼åº¦é˜ˆå€¼

ç¼–è¾‘ `backend/src/main/resources/application.yml`ï¼š

```yaml
baidu:
  face:
    threshold: 80.0  # ä¿®æ”¹ä¸º 70-90 ä¹‹é—´çš„å€¼
```

### ä½¿ç”¨è‡ªå·±çš„ç™¾åº¦APIå‡­è¯ï¼ˆå¯é€‰ï¼‰

å¦‚æœéœ€è¦ä½¿ç”¨è‡ªå·±çš„APIå‡­è¯ï¼Œå¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡è¦†ç›–ï¼š

```bash
# Linux/Mac
export BAIDU_FACE_APP_ID=your_app_id
export BAIDU_FACE_API_KEY=your_api_key
export BAIDU_FACE_SECRET_KEY=your_secret_key

# Windows PowerShell
$env:BAIDU_FACE_APP_ID="your_app_id"
$env:BAIDU_FACE_API_KEY="your_api_key"
$env:BAIDU_FACE_SECRET_KEY="your_secret_key"
```

## ğŸ› å¸¸è§é—®é¢˜

### Q1: æ‘„åƒå¤´æ— æ³•å¼€å¯ï¼Ÿ
**A**: ç¡®ä¿æµè§ˆå™¨æœ‰æ‘„åƒå¤´æƒé™ï¼Œä½¿ç”¨ Chrome/Edge/Firefox æœ€æ–°ç‰ˆæœ¬ã€‚

### Q2: éªŒè¯å¤±è´¥ï¼Ÿ
**A**: 
- ç¡®ä¿ä¸Šä¼ çš„ç…§ç‰‡æ¸…æ™°ä¸”ä¸ºæ­£é¢ç…§
- éªŒè¯æ—¶å…‰çº¿å……è¶³
- é¢éƒ¨å®Œæ•´æ˜¾ç¤ºåœ¨æ‘„åƒå¤´ä¸­

### Q3: APIè°ƒç”¨å¤±è´¥ï¼Ÿ
**A**: 
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- æŸ¥çœ‹åç«¯æ—¥å¿—ï¼š`[FaceRecognition]` å¼€å¤´çš„æ—¥å¿—
- ç¡®è®¤ç™¾åº¦APIé…é¢æœªè¶…é™

### Q4: è€ƒè¯•æ—¶é—´è¿‡æœŸï¼Ÿ
**A**: 
```sql
-- æ›´æ–°è€ƒè¯•æ—¶é—´
UPDATE biz_exam 
SET start_time = '2025-12-30 08:00:00', 
    end_time = '2025-12-31 23:59:59' 
WHERE id = 2;
```

## ğŸ“¦ éƒ¨ç½²è¯´æ˜

### Dockeréƒ¨ç½²

```bash
# 1. æ„å»ºåç«¯
docker run --rm -v "${PWD}/backend:/app" -w /app maven:3.9.8-eclipse-temurin-17 mvn package -DskipTests

# 2. å¯åŠ¨æœåŠ¡
docker-compose up -d
```

### ç”Ÿäº§ç¯å¢ƒ

1. ä¿®æ”¹ `application.yml` ä¸­çš„æ•°æ®åº“é…ç½®
2. è®¾ç½®ç¯å¢ƒå˜é‡ `DB_PASSWORD`
3. æ„å»ºå‰ç«¯ï¼š`npm run build`
4. éƒ¨ç½² `frontend/dist` åˆ° Nginx/Apache
5. å¯åŠ¨åç«¯ï¼š`java -jar backend.jar`

## ğŸ” å®‰å…¨å»ºè®®

1. **ç”Ÿäº§ç¯å¢ƒ**ï¼šä½¿ç”¨ç¯å¢ƒå˜é‡è€Œéç¡¬ç¼–ç APIå‡­è¯
2. **HTTPS**ï¼šç”Ÿäº§ç¯å¢ƒå¿…é¡»ä½¿ç”¨HTTPSï¼ˆæ‘„åƒå¤´æƒé™è¦æ±‚ï¼‰
3. **APIé…é¢**ï¼šç›‘æ§ç™¾åº¦APIè°ƒç”¨æ¬¡æ•°ï¼Œé¿å…è¶…é™
4. **æ•°æ®åº“**ï¼šä¿®æ”¹é»˜è®¤å¯†ç ï¼Œä½¿ç”¨å¼ºå¯†ç 

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### æŸ¥çœ‹æ—¥å¿—

**åç«¯æ—¥å¿—**ï¼š
```bash
# æŸ¥æ‰¾äººè„¸è¯†åˆ«ç›¸å…³æ—¥å¿—
grep "FaceRecognition" backend.log
```

**å‰ç«¯æ§åˆ¶å°**ï¼š
- æŒ‰ F12 æ‰“å¼€å¼€å‘è€…å·¥å…·
- æŸ¥çœ‹ Console æ ‡ç­¾
- æœç´¢ `[FaceVerification]`

### è°ƒè¯•æ¨¡å¼

åç«¯å·²å†…ç½®è¯¦ç»†æ—¥å¿—ï¼Œä¼šè¾“å‡ºï¼š
- APIè°ƒç”¨å‚æ•°
- å“åº”æ•°æ®
- é”™è¯¯ä¿¡æ¯

å‰ç«¯æ§åˆ¶å°ä¼šæ˜¾ç¤ºï¼š
- éªŒè¯æµç¨‹çŠ¶æ€
- APIè¯·æ±‚/å“åº”
- é”™è¯¯è¯¦æƒ…

## âœ… åŠŸèƒ½æ¸…å•

- [x] ç™¾åº¦APIé…ç½®å·²å†…ç½®ï¼ˆæ— éœ€é¢å¤–é…ç½®ï¼‰
- [x] äººè„¸ç…§ç‰‡ä¸Šä¼ å’Œé¢„è§ˆ
- [x] æ‘„åƒå¤´å®æ—¶é¢„è§ˆ
- [x] äººè„¸æ‹ç…§éªŒè¯
- [x] V2/V3 APIè‡ªåŠ¨åˆ‡æ¢
- [x] ç›¸ä¼¼åº¦åˆ†æ•°æ˜¾ç¤º
- [x] è€ƒè¯•å‰å¼ºåˆ¶éªŒè¯
- [x] å®Œæ•´çš„é”™è¯¯å¤„ç†
- [x] è¯¦ç»†çš„æ—¥å¿—è¾“å‡º
- [x] æµ‹è¯•è´¦å·é¢„ç½®

## ğŸ‰ æ€»ç»“

**é¡¹ç›®å·²å®Œå…¨é…ç½®å¥½äººè„¸è¯†åˆ«åŠŸèƒ½ï¼**

å›¢é˜Ÿæˆå‘˜åªéœ€ï¼š
1. å…‹éš†é¡¹ç›®
2. å¯åŠ¨æ•°æ®åº“ã€åç«¯ã€å‰ç«¯
3. ä½¿ç”¨ student1 è´¦å·ç™»å½•
4. ç«‹å³ä½“éªŒå®Œæ•´çš„äººè„¸è¯†åˆ«+è€ƒè¯•æµç¨‹

**æ— éœ€ä»»ä½•é¢å¤–é…ç½®ï¼Œå¼€ç®±å³ç”¨ï¼** ğŸš€

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
**æœ€åæ›´æ–°**: 2025-12-30  
**ç»´æŠ¤è€…**: å¼€å‘å›¢é˜Ÿ
