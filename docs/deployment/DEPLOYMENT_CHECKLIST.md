# æ•™å¸ˆç«¯åŠŸèƒ½éƒ¨ç½²æ£€æŸ¥æ¸…å•

## ğŸ“‹ éƒ¨ç½²å‰æ£€æŸ¥

### 1. ä»£ç å‡†å¤‡ âœ…
- [x] æ‰€æœ‰Javaæ–‡ä»¶ç¼–è¯‘æ— é”™è¯¯
- [x] æ‰€æœ‰Linteræ£€æŸ¥é€šè¿‡
- [x] æ•°æ®åº“è¿ç§»è„šæœ¬å·²åˆ›å»º (`db_migration_teacher.sql`)
- [x] å‰ç«¯æ„å»ºå®Œæˆ (`frontend/dist` å­˜åœ¨)
- [x] åç«¯JARåŒ…å·²ç”Ÿæˆ (`backend/target/backend.jar` å­˜åœ¨)

### 2. é…ç½®æ–‡ä»¶æ£€æŸ¥ âœ…
- [x] `docker-compose.yml` å·²æ›´æ–°ï¼ˆåŒ…å«æ–°çš„è¿ç§»è„šæœ¬ï¼‰
- [x] æ•°æ®åº“è¿æ¥é…ç½®æ­£ç¡®
- [x] ç«¯å£é…ç½®æ— å†²çª

### 3. ä¾èµ–æ£€æŸ¥ âœ…
- [x] Docker å·²å®‰è£…
- [x] Docker Compose å·²å®‰è£…
- [x] ç½‘ç»œè¿æ¥æ­£å¸¸

---

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### æ–¹å¼ä¸€ï¼šä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬ï¼ˆæ¨èï¼‰

```powershell
# å®Œæ•´éƒ¨ç½²å’Œæµ‹è¯•
.\deploy-and-test.ps1

# æˆ–è€…ä½¿ç”¨åŸæœ‰è„šæœ¬
.\deploy-all.ps1
```

### æ–¹å¼äºŒï¼šæ‰‹åŠ¨éƒ¨ç½²

#### æ­¥éª¤1: åœæ­¢ç°æœ‰æœåŠ¡
```powershell
docker-compose down
```

#### æ­¥éª¤2: æ¸…ç†æ—§æ•°æ®ï¼ˆå¯é€‰ï¼‰
```powershell
# åˆ é™¤æ•°æ®å·ï¼ˆä¼šæ¸…é™¤æ‰€æœ‰æ•°æ®ï¼‰
docker volume rm chaoxing-system_mysql_data
```

#### æ­¥éª¤3: å¯åŠ¨æœåŠ¡
```powershell
docker-compose up -d
```

#### æ­¥éª¤4: ç­‰å¾…æœåŠ¡å°±ç»ª
```powershell
# ç­‰å¾…çº¦50ç§’è®©æœåŠ¡å®Œå…¨å¯åŠ¨
# - MySQLåˆå§‹åŒ–: ~30ç§’
# - åç«¯å¯åŠ¨: ~20ç§’
```

#### æ­¥éª¤5: æ£€æŸ¥æœåŠ¡çŠ¶æ€
```powershell
docker ps --filter "name=chaoxing"
```

---

## âœ… éƒ¨ç½²åæ£€æŸ¥

### 1. æœåŠ¡çŠ¶æ€æ£€æŸ¥

```powershell
# æ£€æŸ¥æ‰€æœ‰æœåŠ¡æ˜¯å¦è¿è¡Œ
docker ps --filter "name=chaoxing" --format "table {{.Names}}\t{{.Status}}\t{{.Ports}}"
```

**æœŸæœ›ç»“æœ:**
```
NAME                  STATUS          PORTS
chaoxing-mysql        Up X minutes    0.0.0.0:3306->3306/tcp
chaoxing-backend      Up X minutes    0.0.0.0:8083->8083/tcp
chaoxing-frontend     Up X minutes    0.0.0.0:8080->8080/tcp
```

### 2. æ•°æ®åº“è¡¨æ£€æŸ¥

```powershell
# è¿›å…¥MySQLå®¹å™¨
docker exec -it chaoxing-mysql mysql -uroot -proot chaoxing

# æ£€æŸ¥æ–°è¡¨æ˜¯å¦åˆ›å»º
SHOW TABLES LIKE 'biz_%';
```

**æœŸæœ›ç»“æœ - åº”åŒ…å«ä»¥ä¸‹æ–°è¡¨:**
```sql
biz_exam_student       âœ“
biz_class              âœ“
biz_class_student      âœ“
biz_monitor_warning    âœ“
biz_score_adjustment   âœ“
biz_subject            âœ“
```

**æ£€æŸ¥ç§‘ç›®åˆå§‹æ•°æ®:**
```sql
SELECT * FROM biz_subject;
```

**æ£€æŸ¥ç­çº§åˆå§‹æ•°æ®:**
```sql
SELECT * FROM biz_class;
```

### 3. APIæµ‹è¯•

#### 3.1 æµ‹è¯•å‰ç«¯
```powershell
# æµè§ˆå™¨è®¿é—®
http://localhost:8080
```
**æœŸæœ›:** èƒ½æ­£å¸¸æ‰“å¼€ç™»å½•é¡µé¢

#### 3.2 æµ‹è¯•åç«¯å¥åº·æ£€æŸ¥
```powershell
# PowerShell
Invoke-WebRequest http://localhost:8083/api/subjects

# æˆ–ä½¿ç”¨curl (å¦‚æœå·²å®‰è£…)
curl http://localhost:8083/api/subjects
```
**æœŸæœ›:** è¿”å›401/403ï¼ˆéœ€è¦è®¤è¯ï¼‰æˆ–200ï¼ˆå¦‚æœæœªè®¾ç½®æƒé™ï¼‰

#### 3.3 æµ‹è¯•æ–°å¢API

**ç§‘ç›®åˆ—è¡¨ï¼ˆå…¬å¼€æ¥å£ï¼‰:**
```bash
GET http://localhost:8083/api/subjects
```

**ç­çº§åˆ—è¡¨ï¼ˆéœ€è¦ç™»å½•ï¼‰:**
```bash
GET http://localhost:8083/api/classes?all=true
```

**è€ƒè¯•è¯¦æƒ…ï¼ˆéœ€è¦ç™»å½•ï¼‰:**
```bash
GET http://localhost:8083/api/exams/1
```

### 4. æ—¥å¿—æ£€æŸ¥

```powershell
# æŸ¥çœ‹åç«¯æ—¥å¿—
docker logs chaoxing-backend

# å®æ—¶æŸ¥çœ‹æ—¥å¿—
docker logs -f chaoxing-backend

# æŸ¥çœ‹MySQLæ—¥å¿—
docker logs chaoxing-mysql
```

**æ£€æŸ¥è¦ç‚¹:**
- âœ… æ— ä¸¥é‡é”™è¯¯ (ERROR)
- âœ… åº”ç”¨æˆåŠŸå¯åŠ¨
- âœ… æ•°æ®åº“è¿æ¥æˆåŠŸ
- âœ… MapperåŠ è½½æˆåŠŸ

---

## ğŸ” é—®é¢˜æ’æŸ¥

### é—®é¢˜1: æœåŠ¡å¯åŠ¨å¤±è´¥

**ç—‡çŠ¶:** `docker ps` æ²¡æœ‰æ˜¾ç¤ºæŸä¸ªæœåŠ¡

**æ’æŸ¥æ­¥éª¤:**
1. æŸ¥çœ‹æ—¥å¿—
   ```powershell
   docker logs chaoxing-backend
   docker logs chaoxing-mysql
   ```

2. æ£€æŸ¥ç«¯å£å ç”¨
   ```powershell
   netstat -ano | findstr "8080"
   netstat -ano | findstr "8083"
   netstat -ano | findstr "3306"
   ```

3. é‡å¯æœåŠ¡
   ```powershell
   docker-compose restart
   ```

### é—®é¢˜2: æ•°æ®åº“è¿æ¥å¤±è´¥

**ç—‡çŠ¶:** åç«¯æ—¥å¿—æ˜¾ç¤ºæ•°æ®åº“è¿æ¥é”™è¯¯

**è§£å†³æ–¹æ¡ˆ:**
1. æ£€æŸ¥MySQLæ˜¯å¦å¥åº·
   ```powershell
   docker exec chaoxing-mysql mysqladmin -uroot -proot ping
   ```

2. ç­‰å¾…æ›´é•¿æ—¶é—´ï¼ˆMySQLåˆå§‹åŒ–å¯èƒ½éœ€è¦æ›´å¤šæ—¶é—´ï¼‰

3. é‡å¯åç«¯
   ```powershell
   docker-compose restart backend
   ```

### é—®é¢˜3: æ–°è¡¨æœªåˆ›å»º

**ç—‡çŠ¶:** æ•°æ®åº“ä¸­ç¼ºå°‘æ–°è¡¨

**è§£å†³æ–¹æ¡ˆ:**
1. æ£€æŸ¥è¿ç§»è„šæœ¬æ˜¯å¦æ­£ç¡®æŒ‚è½½
   ```powershell
   docker exec chaoxing-mysql ls -la /docker-entrypoint-initdb.d/
   ```
   åº”è¯¥çœ‹åˆ° `03-teacher-migration.sql`

2. æ‰‹åŠ¨æ‰§è¡Œè¿ç§»è„šæœ¬
   ```powershell
   docker exec -i chaoxing-mysql mysql -uroot -proot chaoxing < backend/db_migration_teacher.sql
   ```

### é—®é¢˜4: APIè¿”å›404

**ç—‡çŠ¶:** è®¿é—®æ–°APIè¿”å›404

**å¯èƒ½åŸå› :**
- ControlleræœªåŠ è½½
- è·¯å¾„é”™è¯¯
- æ¨¡å—æƒé™é—®é¢˜

**æ’æŸ¥:**
1. æ£€æŸ¥åç«¯æ—¥å¿—ï¼Œç¡®è®¤Controllerå·²åŠ è½½
2. æ£€æŸ¥URLè·¯å¾„æ˜¯å¦æ­£ç¡®
3. æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æœ‰æƒé™è®¿é—®è¯¥æ¨¡å—

### é—®é¢˜5: å‰ç«¯æ— æ³•è®¿é—®åç«¯

**ç—‡çŠ¶:** å‰ç«¯é¡µé¢æ˜¾ç¤ºç½‘ç»œé”™è¯¯

**è§£å†³æ–¹æ¡ˆ:**
1. æ£€æŸ¥åç«¯æ˜¯å¦æ­£å¸¸è¿è¡Œ
2. æ£€æŸ¥CORSé…ç½®
3. æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°ç½‘ç»œè¯·æ±‚è¯¦æƒ…

---

## ğŸ“Š æ€§èƒ½æ£€æŸ¥

### 1. å†…å­˜ä½¿ç”¨
```powershell
docker stats --no-stream
```

### 2. å“åº”æ—¶é—´
```powershell
# ä½¿ç”¨PowerShellæµ‹è¯•
Measure-Command { Invoke-WebRequest http://localhost:8083/api/subjects }
```

**æœŸæœ›:** é¦–æ¬¡è¯·æ±‚ < 2ç§’ï¼Œåç»­è¯·æ±‚ < 500ms

---

## ğŸ” å®‰å…¨æ£€æŸ¥

### 1. é»˜è®¤å¯†ç ä¿®æ”¹
- [ ] MySQL rootå¯†ç ï¼ˆç”Ÿäº§ç¯å¢ƒå¿…é¡»ä¿®æ”¹ï¼‰
- [ ] åº”ç”¨JWTå¯†é’¥ï¼ˆç”Ÿäº§ç¯å¢ƒå¿…é¡»ä¿®æ”¹ï¼‰

### 2. ç«¯å£æš´éœ²
- [ ] ç¡®è®¤åªæš´éœ²å¿…è¦çš„ç«¯å£
- [ ] ç”Ÿäº§ç¯å¢ƒä¸æš´éœ²MySQLç«¯å£

### 3. æ—¥å¿—æ•æ„Ÿä¿¡æ¯
- [ ] æ£€æŸ¥æ—¥å¿—ä¸­æ˜¯å¦åŒ…å«æ•æ„Ÿä¿¡æ¯

---

## ğŸ“ åŠŸèƒ½éªŒæ”¶æµ‹è¯•

### æ•™å¸ˆç«¯æ ¸å¿ƒåŠŸèƒ½
- [ ] ç™»å½•ç³»ç»Ÿï¼ˆæ•™å¸ˆè´¦å·ï¼‰
- [ ] æŸ¥çœ‹è€ƒè¯•åˆ—è¡¨
- [ ] åˆ›å»ºè€ƒè¯•
- [ ] æŸ¥çœ‹è€ƒè¯•è¯¦æƒ…ï¼ˆæ–°åŠŸèƒ½ï¼‰
- [ ] ç®¡ç†è€ƒç”Ÿï¼ˆæ–°åŠŸèƒ½ï¼‰
  - [ ] æ·»åŠ è€ƒç”Ÿ
  - [ ] ç§»é™¤è€ƒç”Ÿ
- [ ] æŸ¥çœ‹ç­çº§åˆ—è¡¨ï¼ˆæ–°åŠŸèƒ½ï¼‰
- [ ] è¯•å·ç®¡ç†
  - [ ] åˆ›å»ºè¯•å·
  - [ ] æŸ¥çœ‹è¯•å·è¯¦æƒ…ï¼ˆæ–°åŠŸèƒ½ï¼‰
  - [ ] åˆ é™¤è¯•å·ï¼ˆæ–°åŠŸèƒ½ï¼‰
- [ ] æˆç»©ç®¡ç†
  - [ ] æŸ¥çœ‹æˆç»©åˆ—è¡¨
  - [ ] è°ƒæ•´æˆç»©ï¼ˆæ–°åŠŸèƒ½ï¼‰
  - [ ] å¯¼å‡ºæˆç»©ï¼ˆæ–°åŠŸèƒ½ï¼‰
- [ ] ç›‘è€ƒåŠŸèƒ½ï¼ˆæ–°åŠŸèƒ½ï¼‰
  - [ ] æŸ¥çœ‹ç›‘è€ƒæ•°æ®
  - [ ] å‘é€è­¦å‘Š
  - [ ] å¼ºåˆ¶æ”¶å·

---

## ğŸ“ˆ ç›‘æ§å»ºè®®

### 1. å®šæœŸæ£€æŸ¥
```powershell
# æ¯å°æ—¶æ£€æŸ¥ä¸€æ¬¡æœåŠ¡çŠ¶æ€
docker ps --filter "name=chaoxing"

# æ£€æŸ¥ç£ç›˜ä½¿ç”¨
docker system df
```

### 2. æ—¥å¿—è½®è½¬
å»ºè®®é…ç½®Dockeræ—¥å¿—è½®è½¬ï¼Œé¿å…æ—¥å¿—æ–‡ä»¶è¿‡å¤§

### 3. å¤‡ä»½
å®šæœŸå¤‡ä»½æ•°æ®åº“ï¼š
```powershell
docker exec chaoxing-mysql mysqldump -uroot -proot chaoxing > backup_$(Get-Date -Format 'yyyyMMdd_HHmmss').sql
```

---

## âœ… éƒ¨ç½²å®Œæˆç¡®è®¤

å®Œæˆä»¥ä¸‹æ‰€æœ‰æ£€æŸ¥é¡¹åï¼Œç³»ç»Ÿå³å¯æŠ•å…¥ä½¿ç”¨ï¼š

- [ ] æ‰€æœ‰DockeræœåŠ¡æ­£å¸¸è¿è¡Œ
- [ ] æ•°æ®åº“è¡¨å…¨éƒ¨åˆ›å»ºæˆåŠŸ
- [ ] åˆå§‹æ•°æ®å·²å¯¼å…¥
- [ ] å‰ç«¯é¡µé¢å¯æ­£å¸¸è®¿é—®
- [ ] åç«¯APIå¯æ­£å¸¸å“åº”
- [ ] æ—¥å¿—æ— ä¸¥é‡é”™è¯¯
- [ ] æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•é€šè¿‡
- [ ] æ–‡æ¡£å·²æ›´æ–°

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·å‚è€ƒï¼š
- `TEACHER_API_IMPLEMENTATION.md` - APIè¯¦ç»†æ–‡æ¡£
- `TEST_REPORT.md` - æµ‹è¯•æŠ¥å‘Š
- `FINAL_TEST_SUMMARY.md` - æœ€ç»ˆæµ‹è¯•æ€»ç»“

æˆ–æŸ¥çœ‹æ—¥å¿—è¿›è¡Œæ’æŸ¥ï¼š
```powershell
docker logs chaoxing-backend --tail 100
docker logs chaoxing-mysql --tail 100
```

---

**éƒ¨ç½²æ£€æŸ¥æ¸…å•ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2024å¹´12æœˆ24æ—¥

