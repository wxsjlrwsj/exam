# 学生端查看考试功能测试指南

## 服务状态确认

✅ **所有服务已成功启动：**
- 前端：http://localhost:8080
- 后端：http://localhost:8083
- MySQL：已就绪

---

## 测试账号

根据种子数据，可以使用以下学生账号登录：

**学生账号1：**
- 用户名：`stu001`
- 密码：（请查看seed.sql中的密码，通常是 `123456`）

**学生账号2：**
- 用户名：`stu002`
- 密码：（请查看seed.sql中的密码，通常是 `123456`）

---

## 功能测试清单

### 1. 基础功能测试

#### 1.1 登录功能
- [ ] 访问 http://localhost:8080
- [ ] 使用学生账号登录
- [ ] 确认成功进入学生仪表板

#### 1.2 查看考试列表
- [ ] 点击"我的考试"菜单
- [ ] 确认能看到考试列表
- [ ] 检查列表字段是否完整：
  - 考试名称
  - 学科
  - 考试时间
  - 时长
  - 学期
  - 状态
  - 操作按钮

#### 1.3 筛选功能
- [ ] 按学科名称筛选
- [ ] 按学期筛选
- [ ] 按考试状态筛选：
  - 未开始
  - 进行中
  - 待批阅
  - 已完成
- [ ] 重置筛选条件

#### 1.4 分页功能
- [ ] 切换页码
- [ ] 确认分页正常工作

---

### 2. 考试详情功能

#### 2.1 查看未开始的考试
- [ ] 点击"未开始"状态的考试
- [ ] 查看考试详情弹窗
- [ ] 确认显示内容：
  - 考试名称
  - 学科
  - 学期
  - 考试时间
  - 考试时长
  - 当前状态
  - 考试说明（如果有）

#### 2.2 查看进行中的考试
- [ ] 点击"进行中"状态的考试
- [ ] 点击"参加考试"按钮
- [ ] 进入考前检查界面
- [ ] 测试摄像头检测功能
- [ ] 阅读考试规则
- [ ] 点击"进入考试"

#### 2.3 查看待批阅的考试
- [ ] 点击"待批阅"状态的考试
- [ ] 查看详情
- [ ] 确认显示"正在批阅中"的提示
- [ ] 确认显示实际用时

#### 2.4 查看已完成的考试
- [ ] 点击"已完成"状态的考试
- [ ] 查看成绩详情
- [ ] 确认显示：
  - 最终得分（大圆圈显示）
  - 实际用时
- [ ] 点击"查看试卷"按钮
- [ ] 进入试卷回顾界面

---

### 3. 考试界面功能

#### 3.1 界面布局
- [ ] 左侧边栏显示：
  - 开始时间
  - 考试时长
  - 剩余时间倒计时
  - 考生信息（姓名、学号、科目）
- [ ] 中间内容区显示题目
- [ ] 右侧答题卡显示题号列表
- [ ] 左下角显示摄像头监控

#### 3.2 答题功能
**单选题：**
- [ ] 点击选项进行选择
- [ ] 选中的选项高亮显示
- [ ] 可以更改选择

**多选题：**
- [ ] 点击选项进行多选
- [ ] 选中的选项高亮显示
- [ ] 可以取消选择

**判断题：**
- [ ] 选择"正确"或"错误"
- [ ] 选中项高亮显示

**填空题/简答题：**
- [ ] 在文本框中输入答案
- [ ] 文本框支持多行输入

#### 3.3 导航功能
**逐题模式：**
- [ ] 使用"上一题"/"下一题"按钮切换
- [ ] 最后一题显示"整卷预览"按钮
- [ ] 右侧答题卡显示当前题目（橙色高亮）
- [ ] 点击答题卡题号可跳转

**整卷模式：**
- [ ] 点击"整卷模式"按钮
- [ ] 所有题目一次性显示
- [ ] 可以滚动查看所有题目
- [ ] 点击答题卡题号滚动到对应题目
- [ ] 点击"逐题模式"返回

#### 3.4 答题状态显示
- [ ] 答题卡中已答题目显示蓝色
- [ ] 未答题目显示灰色
- [ ] 当前题目显示橙色边框

#### 3.5 时间提醒功能
- [ ] 考试时长设置较短（如10分钟）进行测试
- [ ] 确认剩余时间实时更新
- [ ] 剩余时间少于5分钟时，计时器变红
- [ ] 时间到自动交卷

#### 3.6 防作弊功能
- [ ] 摄像头监控正常开启
- [ ] 左下角显示实时画面
- [ ] 切换标签页/窗口触发警告
- [ ] 切屏3次后强制交卷
- [ ] 水印显示学生姓名和学号

#### 3.7 交卷功能
- [ ] 点击"交卷"按钮
- [ ] 显示确认对话框
- [ ] 确认提交信息：
  - 已答题数/总题数
  - 实际用时
- [ ] 提交成功后返回考试列表
- [ ] 考试状态更新为"待批阅"

---

### 4. 试卷回顾功能

#### 4.1 进入试卷回顾
- [ ] 从已完成的考试进入
- [ ] 显示得分和答题详情

#### 4.2 查看答题情况
- [ ] 每道题显示：
  - 题目内容
  - 题型和分值
  - 正确/错误标识
  - 学生答案（标记为红色或绿色）
  - 正确答案（标记为绿色）
  - 解析内容

#### 4.3 选择题答案对比
- [ ] 学生选择的选项标记为红色/绿色
- [ ] 正确选项标记为绿色
- [ ] 显示"您的答案"和"正确答案"图标

---

## 后端API验证

### 学生考试API端点

#### 1. 获取考试列表
```bash
GET http://localhost:8083/api/student/exams?page=1&size=10
Authorization: Bearer {token}
```

**测试要点：**
- [ ] 返回状态码200
- [ ] 返回数据包含list和total字段
- [ ] list中包含考试信息和recordStatus

#### 2. 获取试卷题目
```bash
GET http://localhost:8083/api/student/exams/{examId}/paper
Authorization: Bearer {token}
```

**测试要点：**
- [ ] 返回状态码200
- [ ] 返回questions数组
- [ ] 每道题包含：id, type, content, options, score

#### 3. 提交试卷
```bash
POST http://localhost:8083/api/student/exams/{examId}/submit
Authorization: Bearer {token}
Content-Type: application/json

{
  "answers": {
    "1": "A",
    "2": ["A", "C"],
    "3": "这是我的答案"
  },
  "durationUsed": 1800
}
```

**测试要点：**
- [ ] 返回状态码200
- [ ] 提交成功后记录状态更新

#### 4. 查看考试结果
```bash
GET http://localhost:8083/api/student/exams/{examId}/result
Authorization: Bearer {token}
```

**测试要点：**
- [ ] 返回状态码200
- [ ] 返回record（成绩记录）
- [ ] 返回questions（题目详情）
- [ ] 返回answers（学生答案）

---

## 前端功能验证

### 需要验证的前端功能

#### 1. 考试列表页面
- [ ] 数据正确加载
- [ ] 筛选功能正常
- [ ] 分页功能正常
- [ ] 状态标签颜色正确
- [ ] 操作按钮根据状态正确显示

#### 2. 考试详情弹窗
- [ ] 信息完整显示
- [ ] 格式化显示正确
- [ ] 按钮状态正确

#### 3. 考前检查界面
- [ ] 摄像头检测功能正常
- [ ] 考试规则显示
- [ ] 按钮禁用/启用逻辑正确

#### 4. 考试界面
- [ ] 布局完整
- [ ] 倒计时正常
- [ ] 答题功能正常
- [ ] 导航功能正常
- [ ] 状态显示正常

#### 5. 试卷回顾界面
- [ ] 答题情况正确显示
- [ ] 对错标记清晰
- [ ] 解析内容显示

---

## 常见问题排查

### 1. 无法登录
**可能原因：**
- 用户名或密码错误
- 后端服务未启动
- 数据库连接失败

**排查步骤：**
```bash
# 检查服务状态
docker-compose ps

# 查看后端日志
docker-compose logs backend --tail=50

# 查看MySQL日志
docker-compose logs mysql --tail=50
```

### 2. 考试列表为空
**可能原因：**
- 数据库未初始化
- 学生未分配考试
- 时间范围不匹配

**排查步骤：**
```bash
# 进入MySQL容器
docker exec -it chaoxing-mysql mysql -uroot -proot

# 查看数据
USE chaoxing;
SELECT * FROM biz_exam;
SELECT * FROM biz_exam_student;
```

### 3. 无法获取试卷
**可能原因：**
- 不在考试时间范围内
- 学生未被分配到该考试
- 试卷不存在或没有题目

**排查步骤：**
- 检查考试时间设置
- 检查biz_exam_student表
- 检查biz_paper和biz_paper_question表

### 4. 提交失败
**可能原因：**
- 答案格式不正确
- 题目ID无效
- 网络请求失败

**排查步骤：**
- 打开浏览器开发者工具
- 查看Network标签页
- 检查请求和响应

---

## 性能测试建议

### 1. 大量题目测试
- 创建包含100+题目的试卷
- 测试加载性能
- 测试滚动性能
- 测试提交性能

### 2. 并发测试
- 多个学生同时参加考试
- 测试服务器性能
- 检查是否有并发问题

### 3. 长时间考试测试
- 设置较长的考试时间（如2小时）
- 测试倒计时是否准确
- 测试是否有内存泄漏

---

## 测试报告模板

```
# 学生端考试功能测试报告

测试日期：2024-12-25
测试人员：[姓名]
测试环境：
- 前端：http://localhost:8080
- 后端：http://localhost:8083
- 数据库：MySQL 8.0

## 测试结果概述
- 通过：[X]项
- 失败：[X]项
- 阻塞：[X]项

## 详细测试结果

### 1. 登录功能
✅ 通过 / ❌ 失败
备注：[说明]

### 2. 查看考试列表
✅ 通过 / ❌ 失败
备注：[说明]

### 3. 筛选功能
✅ 通过 / ❌ 失败
备注：[说明]

[继续其他功能...]

## 发现的问题
1. [问题描述]
   - 严重程度：高/中/低
   - 复现步骤：[步骤]
   - 期望结果：[结果]
   - 实际结果：[结果]

## 改进建议
1. [建议内容]
2. [建议内容]

## 总体评价
[对整体功能的评价]
```

---

## 快速测试命令

```bash
# 启动所有服务
docker-compose up -d

# 查看服务状态
docker-compose ps

# 查看后端日志
docker-compose logs -f backend

# 查看前端日志
docker-compose logs -f frontend

# 停止所有服务
docker-compose down

# 停止并清理数据
docker-compose down -v
```

---

## 联系方式

如有问题，请参考：
- 项目文档：`docs/`目录
- API文档：`docs/api/API_SPECS.md`
- 部署文档：`docs/deployment/`目录

---

**祝测试顺利！** 🎉

