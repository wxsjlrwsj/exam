<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.example.chaoxingsystem.teacher.exam.ExamMapper">

  <resultMap id="ExamMap" type="org.example.chaoxingsystem.teacher.exam.Exam">
    <id property="id" column="id"/>
    <result property="name" column="name"/>
    <result property="paperId" column="paper_id"/>
    <result property="startTime" column="start_time"/>
    <result property="endTime" column="end_time"/>
    <result property="duration" column="duration"/>
    <result property="status" column="status"/>
    <result property="creatorId" column="creator_id"/>
    <result property="createTime" column="create_time"/>
  </resultMap>

  <select id="count" resultType="long">
    SELECT COUNT(*) FROM biz_exam
    <where>
      <if test="status != null">
        AND status = #{status}
      </if>
    </where>
  </select>

  <select id="selectPage" resultMap="ExamMap">
    SELECT * FROM biz_exam
    <where>
      <if test="status != null">
        AND status = #{status}
      </if>
    </where>
    ORDER BY create_time DESC
    LIMIT #{offset}, #{limit}
  </select>

  <select id="selectById" resultMap="ExamMap">
    SELECT * FROM biz_exam WHERE id = #{id}
  </select>

  <insert id="insert" useGeneratedKeys="true" keyProperty="id">
    INSERT INTO biz_exam (name, paper_id, start_time, end_time, duration, status, creator_id)
    VALUES (#{name}, #{paperId}, #{startTime}, #{endTime}, #{duration}, #{status}, #{creatorId})
  </insert>

  <update id="updateById">
    UPDATE biz_exam
    SET name = #{name}, paper_id = #{paperId}, start_time = #{startTime},
        end_time = #{endTime}, duration = #{duration}, status = #{status}
    WHERE id = #{id}
  </update>

  <delete id="deleteById">
    DELETE FROM biz_exam WHERE id = #{id}
  </delete>

</mapper>

